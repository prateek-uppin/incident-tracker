{% extends "base.html" %}
{% block content %}
<h1>Incident details</h1>

<div class="card">
    <h2>{{ incident.title }}</h2>

    <p><b>Category:</b> {{ incident.category }}</p>
    <p><b>Severity:</b> {{ incident.severity }}</p>
    <p><b>Status:</b> {{ incident.status }}</p>
    <p>
        <a href="{{ url_for('edit_incident', incident_id=incident.id) }}">Edit</a>
    </p>
    <a href="{{ url_for('delete_incident', incident_id=incident.id) }}">Delete</a>

    <hr class="divider">
    <h3>Update status</h3>
    <form method="post" action="{{ url_for('update_incident_status', incident_id=incident.id) }}" class="status-form">
        <select name="status" required>
            {% for st in ["Open","In Progress","Resolved"] %}
            <option value="{{ st }}" {% if incident.status==st %}selected{% endif %}>{{ st }}</option>
            {% endfor %}
        </select>
        <button type="submit">Update</button>
    </form>

    <p class="muted"><b>Created at:</b> {{ incident.created_at }}</p>

    {% if incident.description %}
        <p><b>Description:</b><br>{{ incident.description }}</p>
    {% endif %}
</div>

<p><a href="{{ url_for('index') }}">â† Back to incidents</a></p>
{% endblock %}
